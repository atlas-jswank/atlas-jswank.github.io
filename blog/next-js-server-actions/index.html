<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><meta name="generator" content="Astro v4.11.5"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/next-js-server-actions/"><!-- Primary Meta Tags --><title>Next JS: Server Actions | in{struct} blog </title><meta name="title" content="Next JS: Server Actions | in{struct} blog "><meta name="description" content="Lorem ipsum dolor sit amet"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/next-js-server-actions/"><meta property="og:title" content="Next JS: Server Actions | in{struct} blog "><meta property="og:description" content="Lorem ipsum dolor sit amet"><meta property="og:image" content="https://example.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/next-js-server-actions/"><meta property="twitter:title" content="Next JS: Server Actions | in{struct} blog "><meta property="twitter:description" content="Lorem ipsum dolor sit amet"><meta property="twitter:image" content="https://example.com/blog-placeholder-1.jpg"><link rel="stylesheet" href="/assets/about.DNzP87XY.css">
<style>.author[data-astro-cid-bvzihdzo]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding-top:48px;color:var(--blue-light)}.author[data-astro-cid-bvzihdzo] span[data-astro-cid-bvzihdzo]{line-height:1.3}.author-image[data-astro-cid-bvzihdzo]{border-radius:50px}main[data-astro-cid-bvzihdzo]{width:100%;max-width:100%;margin:140px 0 0;padding:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%;margin-top:3rem}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose-wrapper[data-astro-cid-bvzihdzo]{color:var(--blue);background-color:var(--off-white-light);margin-top:3rem;border-top-left-radius:30px;border-top-right-radius:30px}.prose[data-astro-cid-bvzihdzo]{width:1020px;max-width:calc(100% - 2em);margin:auto;padding:1em}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}hr[data-astro-cid-bvzihdzo]{border-top:1px solid var(--blue)}
</style></head> <body data-astro-cid-bvzihdzo> <header class="sticky" data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <img src="/logo.png" alt="Logo" class="logo" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>in{struct} blog</a> </h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <!-- <HeaderLink href="/">Home</HeaderLink> --> <!-- <HeaderLink href="/about">About</HeaderLink> --> </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img width="1020" height="510" src="/next-js2.webp" alt="" data-astro-cid-bvzihdzo> </div> <div class="prose-wrapper" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="author" data-astro-cid-bvzihdzo> <img width="70" height="70" src="/jswank.jpg" alt="author" class="author-image" data-astro-cid-bvzihdzo> <span data-astro-cid-bvzihdzo>Jeremiah Swank</span> <span data-astro-cid-bvzihdzo><time datetime="2024-09-30T05:00:00.000Z"> Sep 30, 2024 </time></span> </div> <div class="title" data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>Next JS: Server Actions</h1> </div>  <p>Server Actions allow you to write functions in your components that execute on the server. This approach simplifies form handling and state management by eliminating the need for separate API routes or extensive client-side code.</p>
<h3 id="the-problem-they-solve">The Problem They Solve</h3>
<p>Traditionally, handling server-side operations in React requires setting up API endpoints and using client-side code (like fetch or axios) to interact with these endpoints. This setup can lead to:</p>
<ul>
<li><strong>Boilerplate Code:</strong> Writing repetitive code for data fetching and mutations.</li>
<li><strong>Complex State Management:</strong> Keeping client and server state in sync can be challenging.</li>
<li><strong>Performance Issues:</strong> Extra client-side JavaScript increases bundle size and affects load times.</li>
<li><strong>Security Concerns:</strong> Exposing API endpoints may introduce vulnerabilities if not handled properly.</li>
</ul>
<p>Server Actions address these issues by enabling direct communication between client components and server-side logic without the overhead of traditional API routes.</p>
<h3 id="how-server-actions-work">How Server Actions Work</h3>
<p>Server Actions are functions that you define in your React components but are executed on the server. Here’s how they function:</p>
<ul>
<li><strong>Definition:</strong> You write a function in your component and annotate it to indicate it should run on the server with the ‘use server’ directive.</li>
<li><strong>Invocation:</strong> When the function is called (e.g., on form submission), React serializes the call and sends it to the server.</li>
<li><strong>Execution:</strong> The server receives the call, executes the function, and performs any necessary operations (like database queries).</li>
<li><strong>Response:</strong> The server sends back the result, which can be used to update the client-side UI.</li>
</ul>
<p>This process abstracts away the need for explicit API calls, making your code cleaner and more maintainable.</p>
<h3 id="create-topic">Create Topic</h3>
<p>We need to add the form for creating a new topic to the <code>app/ui/topics/new/page.tsx</code> file. Add following code to the file:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> CreateTopicForm </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/components/CreateTopicForm"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> Page</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">h1</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{</span><span style="color:#F7F0DC">`mb-4 text-xl md:text-2xl`</span><span style="color:#E1E4E8">}>New Topic&#x3C;/</span><span style="color:#1ED2AF">h1</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">CreateTopicForm</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Now we need to create a server action for adding a new topic. A server action is a function that runs on the server but can be triggered from the front end.To create the server action add the following code to <code>lib/actions.ts</code>:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#F7F0DC">"use server"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { revalidatePath } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "next/cache"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { insertTopic } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "./data"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { redirect } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "next/navigation"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> async</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> addTopic</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> FormData</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#D00414">  let</span><span style="color:#E1E4E8"> topic;</span></span>
<span class="line"><span style="color:#D00414">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    topic </span><span style="color:#D00414">=</span><span style="color:#D00414"> await</span><span style="color:#1ED2AF"> insertTopic</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">      title: data.</span><span style="color:#1ED2AF">get</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"title"</span><span style="color:#E1E4E8">) </span><span style="color:#D00414">as</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#D00414">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#1ED2AF">error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Database Error:"</span><span style="color:#E1E4E8">, error);</span></span>
<span class="line"><span style="color:#D00414">    throw</span><span style="color:#D00414"> new</span><span style="color:#1ED2AF"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Failed to add topic."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#D00414">finally</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#1ED2AF">    revalidatePath</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"/ui/topics/[id]"</span><span style="color:#E1E4E8">, </span><span style="color:#F7F0DC">"page"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    topic </span><span style="color:#D00414">&#x26;&#x26;</span><span style="color:#1ED2AF"> redirect</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">`/ui/topics/${</span><span style="color:#E1E4E8">topic</span><span style="color:#F7F0DC">.</span><span style="color:#E1E4E8">id</span><span style="color:#F7F0DC">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre>
<p><strong>Explanation:</strong></p>
<ul>
<li><strong>addTopic(data: FormData):</strong> This is the form data that is recevied from the front end. On the front end we will submit a form and read the data submitted on the backend using the <code>FormData</code> object.</li>
<li><strong>insertTopic:</strong> This is the function that will insert the topic into the database. We red the title of the new topic from the form data and call this method to created the new topic on the database.</li>
<li><strong>revalidatePath(“/ui/topics/[id]”, “page”)</strong>: By default next js caches pages. Becuase we want the page to rerender reflecting the new topic we need to revalidate the path, otherwise stale data could be shown.</li>
<li><strong>redirect(<code>/ui/topics/${topic.id}</code>)</strong>: This will redirect the user to the new topic page.</li>
</ul>
<p>Finally we need to update our form to call the server action. In <code>components/CreateTopicForm.tsx</code> add the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { addTopic } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/lib/actions"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> CreateTopicForm</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">form</span><span style="color:#1ED2AF"> action</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{addTopic}></span></span>
<span class="line"><span style="color:#E1E4E8">      ...</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">form</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="create-question">Create Question</h3>
<p>There is a form for creating questions. We need to create a new server actions for adding the questions to the database. Add of the following code to <code>lib/actions.ts</code>:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> async</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> addQuestion</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">question</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> FormData</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#D00414">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#1ED2AF">    insertQuestion</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">      title: question.</span><span style="color:#1ED2AF">get</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"title"</span><span style="color:#E1E4E8">) </span><span style="color:#D00414">as</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      topic_id: question.</span><span style="color:#1ED2AF">get</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"topic_id"</span><span style="color:#E1E4E8">) </span><span style="color:#D00414">as</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      votes: </span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    });</span></span>
<span class="line"><span style="color:#1ED2AF">    revalidatePath</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"/ui/topics/[id]"</span><span style="color:#E1E4E8">, </span><span style="color:#F7F0DC">"page"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#D00414">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#1ED2AF">error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Database Error:"</span><span style="color:#E1E4E8">, error);</span></span>
<span class="line"><span style="color:#D00414">    throw</span><span style="color:#D00414"> new</span><span style="color:#1ED2AF"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Failed to add question."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Here we need two pieces of information from the form. We need the question content and the id of the topic that the question belongs to. We use the insertQuestion function to add the question to the database and then revalidate the path to prevent any caching in nextjs from showing stale data.</p>
<p>Now in the <code>components/AskQuestion.tsx</code> file add the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { addQuestion } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/lib/actions"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> AskQuestion</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">topic</span><span style="color:#E1E4E8"> }</span><span style="color:#D00414">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">topic</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">form</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"relative my-8"</span><span style="color:#1ED2AF"> action</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{addQuestion}></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">input</span><span style="color:#1ED2AF"> type</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"hidden"</span><span style="color:#1ED2AF"> name</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"topic_id"</span><span style="color:#1ED2AF"> value</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{topic} </span><span style="color:#1ED2AF">className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"hidden"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">      ...</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">form</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>We’ve added the <code>addQuestion</code> action to our form so that our server action will be called when the form is submitted. We’ve aldo added a hidden input field to the form. This will hold the id of the topic and submit it along with the title value but it will not be displayed on the page.</p>
<h3 id="voting">Voting</h3>
<p>The last action we need to add is voting. Whenever the thumbs up button is clicked we want to increment the vote count displayed next to the question. In <code>lib/actions.ts</code> add the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> async</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> addVote</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">data</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> FormData</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#D00414">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#1ED2AF">    incrementVotes</span><span style="color:#E1E4E8">(data.</span><span style="color:#1ED2AF">get</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"id"</span><span style="color:#E1E4E8">) </span><span style="color:#D00414">as</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#1ED2AF">    revalidatePath</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"/ui/topics/[id]"</span><span style="color:#E1E4E8">, </span><span style="color:#F7F0DC">"page"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#D00414">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#E1E4E8">    console.</span><span style="color:#1ED2AF">error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Database Error:"</span><span style="color:#E1E4E8">, error);</span></span>
<span class="line"><span style="color:#D00414">    throw</span><span style="color:#D00414"> new</span><span style="color:#1ED2AF"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"Failed to add vote."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Here we are passed the ID of the question from the front end and we call the incrementVotes function to increment the vote count. We then revalidate the path to prevent any caching in nextjs from showing stale data.</p>
<p>Add the following code to the <code>components/VoteButton.tsx</code> file:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { HandThumbUpIcon } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@heroicons/react/24/outline"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { addVote } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/lib/actions"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> VoteButton</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">id</span><span style="color:#E1E4E8"> }</span><span style="color:#D00414">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">id</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">form</span><span style="color:#1ED2AF"> action</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{addVote}></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">input</span><span style="color:#1ED2AF"> type</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"hidden"</span><span style="color:#1ED2AF"> name</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"id"</span><span style="color:#1ED2AF"> value</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{id} /></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span></span>
<span class="line"><span style="color:#1ED2AF">        type</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"submit"</span></span>
<span class="line"><span style="color:#1ED2AF">        className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"h-8 w-8 min-w-[2rem] rounded-full ring-gray-200 hover:text-atlas-teal active:bg-primary active:text-white active:outline-none active:ring-2 active:ring-primary"</span></span>
<span class="line"><span style="color:#E1E4E8">      ></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#1ED2AF">HandThumbUpIcon</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">form</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="conclusion">Conclusion</h3>
<p>Server Actions in React represent a significant advancement in how developers handle server-side logic in web applications. By integrating server execution directly into your components, you can write cleaner, more efficient code while enhancing performance and security. As the React ecosystem continues to evolve, features like Server Actions will play a crucial role in modern web development.</p>  </div> </div> </article> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Jeremiah Swank. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swank's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-sz7xmlte><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </main> </body></html>