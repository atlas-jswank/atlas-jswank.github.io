<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><meta name="generator" content="Astro v4.11.5"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/common-hooks-mistakes/"><!-- Primary Meta Tags --><title>React State: Common Hooks Mistakes | in{struct} blog </title><meta name="title" content="React State: Common Hooks Mistakes | in{struct} blog "><meta name="description" content="Lorem ipsum dolor sit amet"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/common-hooks-mistakes/"><meta property="og:title" content="React State: Common Hooks Mistakes | in{struct} blog "><meta property="og:description" content="Lorem ipsum dolor sit amet"><meta property="og:image" content="https://example.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/common-hooks-mistakes/"><meta property="twitter:title" content="React State: Common Hooks Mistakes | in{struct} blog "><meta property="twitter:description" content="Lorem ipsum dolor sit amet"><meta property="twitter:image" content="https://example.com/blog-placeholder-1.jpg"><link rel="stylesheet" href="/assets/about.DNzP87XY.css">
<style>.author[data-astro-cid-bvzihdzo]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding-top:48px;color:var(--blue-light)}.author[data-astro-cid-bvzihdzo] span[data-astro-cid-bvzihdzo]{line-height:1.3}.author-image[data-astro-cid-bvzihdzo]{border-radius:50px}main[data-astro-cid-bvzihdzo]{width:100%;max-width:100%;margin:140px 0 0;padding:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%;margin-top:3rem}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose-wrapper[data-astro-cid-bvzihdzo]{color:var(--blue);background-color:var(--off-white-light);margin-top:3rem;border-top-left-radius:30px;border-top-right-radius:30px}.prose[data-astro-cid-bvzihdzo]{width:1020px;max-width:calc(100% - 2em);margin:auto;padding:1em}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}hr[data-astro-cid-bvzihdzo]{border-top:1px solid var(--blue)}
</style></head> <body data-astro-cid-bvzihdzo> <header class="sticky" data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <img src="/logo.png" alt="Logo" class="logo" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>in{struct} blog</a> </h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <!-- <HeaderLink href="/">Home</HeaderLink> --> <!-- <HeaderLink href="/about">About</HeaderLink> --> </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img width="1020" height="510" src="/hooks-mistakes.webp" alt="" data-astro-cid-bvzihdzo> </div> <div class="prose-wrapper" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="author" data-astro-cid-bvzihdzo> <img width="70" height="70" src="/jswank.jpg" alt="author" class="author-image" data-astro-cid-bvzihdzo> <span data-astro-cid-bvzihdzo>Jeremiah Swank</span> <span data-astro-cid-bvzihdzo><time datetime="2024-08-26T05:00:00.000Z"> Aug 26, 2024 </time></span> </div> <div class="title" data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>React State: Common Hooks Mistakes</h1> </div>  <p>When working with React hooks, developers can sometimes make mistakes that lead to bugs or performance issues. Here are some common mistakes and tips on how to avoid them.</p>
<h3 id="using-hooks-conditionally">Using Hooks Conditionally</h3>
<p>Hooks should be called at the top level of a component and not inside conditional statements, loops, or nested functions. Calling hooks conditionally can lead to inconsistent hook order, which breaks the rules of hooks and causes errors.</p>
<p><strong>Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Example</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">isEnabled</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#D00414">  if</span><span style="color:#E1E4E8"> (isEnabled) {</span></span>
<span class="line"><span style="color:#D00414">    const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// Incorrect usage</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ... other code</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p><strong>Also Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Example</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">isEnabled</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#D00414">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#D00414">!</span><span style="color:#E1E4E8">isEnabled) {</span></span>
<span class="line"><span style="color:#D00414">    return</span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">>Disabled&#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">>;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// Incorrect usage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ... other code</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Always call hooks unconditionally at the top level of your component.</p>
<p><strong>Correct:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Example</span><span style="color:#E1E4E8">({ </span><span style="color:#FFAB70">isEnabled</span><span style="color:#E1E4E8"> }) {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">); </span><span style="color:#6A737D">// Correct usage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#D00414">!</span><span style="color:#E1E4E8">isEnabled) </span><span style="color:#D00414">return</span><span style="color:#1ED2AF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ... other code</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="updating-state-directly">Updating State Directly</h3>
<p>Directly mutating state instead of using the updater function provided by useState is a common mistake made by beginners. Mutating state directly can lead to unexpected behavior and bugs since React may not detect the changes properly.</p>
<p><strong>Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">items</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setItems</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">([]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> addItem</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">item</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">  items.</span><span style="color:#1ED2AF">push</span><span style="color:#E1E4E8">(item); </span><span style="color:#6A737D">// Incorrect - do not mutate the state variable directly</span></span>
<span class="line"><span style="color:#1ED2AF">  setItems</span><span style="color:#E1E4E8">(items);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Use the updater function to create a new array or object when updating state.</p>
<p><strong>Correct:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">items</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setItems</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">([]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> addItem</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">item</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#1ED2AF"> newItems</span><span style="color:#D00414"> =</span><span style="color:#E1E4E8"> [</span><span style="color:#D00414">...</span><span style="color:#E1E4E8">items]; </span><span style="color:#6A737D">// Copy current state into new array</span></span>
<span class="line"><span style="color:#E1E4E8">  newItems.</span><span style="color:#1ED2AF">push</span><span style="color:#E1E4E8">(item); </span><span style="color:#6A737D">// Add new item to new array</span></span>
<span class="line"><span style="color:#1ED2AF">  setItems</span><span style="color:#E1E4E8">(newItems); </span><span style="color:#6A737D">// Correct, copy current stat einto new array and set the state to the new array</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="overusing-state">Overusing State</h3>
<p>Another common mistake is using state for every piece of data that could be derived or calculated on-the-fly. Unnecessary state management can lead to performance issues and complex state management.</p>
<p><strong>Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">user</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setUser</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">({ name: </span><span style="color:#F7F0DC">'John'</span><span style="color:#E1E4E8">, age: </span><span style="color:#1ED2AF">30</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">userName</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setUserName</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(user.name); </span><span style="color:#6A737D">// Unnecessary state</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> updateName</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">name</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#1ED2AF">  setUser</span><span style="color:#E1E4E8">({ </span><span style="color:#D00414">...</span><span style="color:#E1E4E8">user, name });</span></span>
<span class="line"><span style="color:#1ED2AF">  setUserName</span><span style="color:#E1E4E8">(name); </span><span style="color:#6A737D">// Synchronize state</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>Derive values when needed and keep state management simple.</p>
<p><strong>Correct:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">user</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setUser</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">({ name: </span><span style="color:#F7F0DC">'John'</span><span style="color:#E1E4E8">, age: </span><span style="color:#1ED2AF">30</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> updateName</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">name</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#1ED2AF">  setUser</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">prevUser</span><span style="color:#E1E4E8">) </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> ({ </span><span style="color:#D00414">...</span><span style="color:#E1E4E8">prevUser, name }));</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="unnecessary-use-of-useeffect">Unnecessary use of useEffect</h3>
<p>Unnecessary use of useEffect often involves using it in scenarios where it isn’t needed, or where it adds complexity without providing any real benefit. Here’s an example illustrating unnecessary use of <code>useEffect</code>.</p>
<p><strong>Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> React, { useState, useEffect } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> 'react'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Counter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">message</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setMessage</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">''</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1ED2AF">  useEffect</span><span style="color:#E1E4E8">(() </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#1ED2AF">    setMessage</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">`Count is ${</span><span style="color:#E1E4E8">count</span><span style="color:#F7F0DC">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }, [count]); </span><span style="color:#6A737D">// Unnecessary use of useEffect</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">>{message}&#x3C;/</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> onClick</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{() </span><span style="color:#D00414">=></span><span style="color:#1ED2AF"> setCount</span><span style="color:#E1E4E8">(count </span><span style="color:#D00414">+</span><span style="color:#1ED2AF"> 1</span><span style="color:#E1E4E8">)}>Increment&#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#E1E4E8"> Counter;</span></span>
<span class="line"></span></code></pre>
<p>In the example above, useEffect is used to update the message state whenever count changes. However, this can be handled more simply without useEffect.</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> React, { useState } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> 'react'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Counter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#1ED2AF"> message</span><span style="color:#D00414"> =</span><span style="color:#F7F0DC"> `Count is ${</span><span style="color:#E1E4E8">count</span><span style="color:#F7F0DC">}`</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// Directly derive message from count</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">>{message}&#x3C;/</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> onClick</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{() </span><span style="color:#D00414">=></span><span style="color:#1ED2AF"> setCount</span><span style="color:#E1E4E8">(count </span><span style="color:#D00414">+</span><span style="color:#1ED2AF"> 1</span><span style="color:#E1E4E8">)}>Increment&#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#E1E4E8"> Counter;</span></span>
<span class="line"></span></code></pre>
<h3 id="calling-outside-component">Calling Outside Component</h3>
<p>Calling hooks outside of React functional components is a common mistake that violates the Rules of Hooks and can lead to errors. Hooks can only be called inside the body of a functional component or another custom hook. Here’s an example illustrating the issue and how to fix it.</p>
<p><strong>Incorrect:</strong></p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> React, { useState } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> 'react'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Custom hook definition</span></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> useCounter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#1ED2AF"> increment</span><span style="color:#D00414"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#D00414">=></span><span style="color:#1ED2AF"> setCount</span><span style="color:#E1E4E8">(count </span><span style="color:#D00414">+</span><span style="color:#1ED2AF"> 1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> [count, increment];</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Calling the hook outside of a React component (incorrect)</span></span>
<span class="line"><span style="color:#D00414">const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">increment</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useCounter</span><span style="color:#E1E4E8">(); </span><span style="color:#6A737D">// This is incorrect</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Counter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">>Count: {count}&#x3C;/</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> onClick</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{increment}>Increment&#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#E1E4E8"> Counter;</span></span>
<span class="line"></span></code></pre>
<p>Hooks like useState can only be called inside a functional component or custom hook. Calling useCounter() outside of a component or custom hook violates the Rules of Hooks and can lead to errors such as invalid hook call errors.</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> React </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> 'react'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Custom hook definition</span></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> useCounter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">setCount</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#1ED2AF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#1ED2AF"> increment</span><span style="color:#D00414"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#D00414">=></span><span style="color:#1ED2AF"> setCount</span><span style="color:#E1E4E8">(count </span><span style="color:#D00414">+</span><span style="color:#1ED2AF"> 1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> [count, increment];</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">function</span><span style="color:#1ED2AF"> Counter</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#1ED2AF">count</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">increment</span><span style="color:#E1E4E8">] </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> useCounter</span><span style="color:#E1E4E8">(); </span><span style="color:#6A737D">// Correct usage inside functional component</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">>Count: {count}&#x3C;/</span><span style="color:#1ED2AF">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> onClick</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{increment}>Increment&#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#E1E4E8"> Counter;</span></span>
<span class="line"></span></code></pre>
<h3 id="best-practices">Best Practices:</h3>
<ul>
<li>Always call hooks at the top level of a functional component or another custom hook.</li>
<li>Avoid calling hooks inside loops, conditions, or nested functions.</li>
<li>If you need to share logic between components, encapsulate it in custom hooks and use those hooks within your components.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>By being mindful of these common mistakes and applying best practices, you can leverage React hooks more effectively and build more robust, maintainable applications. Always test and review your hooks carefully to ensure they work as expected and handle state and side effects efficiently. Happy coding!</p>  </div> </div> </article> <footer data-astro-cid-sz7xmlte>
&copy; 2024 Jeremiah Swank. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swank's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-sz7xmlte><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </main> </body></html>