<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/favicon.png"><meta name="generator" content="Astro v4.11.5"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/next-js-authentication/"><!-- Primary Meta Tags --><title>Next JS: Authentication | in{struct} blog </title><meta name="title" content="Next JS: Authentication | in{struct} blog "><meta name="description" content="Lorem ipsum dolor sit amet"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/next-js-authentication/"><meta property="og:title" content="Next JS: Authentication | in{struct} blog "><meta property="og:description" content="Lorem ipsum dolor sit amet"><meta property="og:image" content="https://example.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/next-js-authentication/"><meta property="twitter:title" content="Next JS: Authentication | in{struct} blog "><meta property="twitter:description" content="Lorem ipsum dolor sit amet"><meta property="twitter:image" content="https://example.com/blog-placeholder-1.jpg"><link rel="stylesheet" href="/assets/about.DNzP87XY.css">
<style>.author[data-astro-cid-bvzihdzo]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding-top:48px;color:var(--blue-light)}.author[data-astro-cid-bvzihdzo] span[data-astro-cid-bvzihdzo]{line-height:1.3}.author-image[data-astro-cid-bvzihdzo]{border-radius:50px}main[data-astro-cid-bvzihdzo]{width:100%;max-width:100%;margin:140px 0 0;padding:0}.hero-image[data-astro-cid-bvzihdzo]{width:100%;margin-top:3rem}.hero-image[data-astro-cid-bvzihdzo] img[data-astro-cid-bvzihdzo]{display:block;margin:0 auto;border-radius:12px;box-shadow:var(--box-shadow)}.prose-wrapper[data-astro-cid-bvzihdzo]{color:var(--blue);background-color:var(--off-white-light);margin-top:3rem;border-top-left-radius:30px;border-top-right-radius:30px}.prose[data-astro-cid-bvzihdzo]{width:1020px;max-width:calc(100% - 2em);margin:auto;padding:1em}.title[data-astro-cid-bvzihdzo]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-bvzihdzo] h1[data-astro-cid-bvzihdzo]{margin:0 0 .5em}.date[data-astro-cid-bvzihdzo]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-bvzihdzo]{font-style:italic}hr[data-astro-cid-bvzihdzo]{border-top:1px solid var(--blue)}
</style></head> <body data-astro-cid-bvzihdzo> <header class="sticky" data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <img src="/logo.png" alt="Logo" class="logo" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>in{struct} blog</a> </h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <!-- <HeaderLink href="/">Home</HeaderLink> --> <!-- <HeaderLink href="/about">About</HeaderLink> --> </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-bvzihdzo> <article data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo> <img width="1020" height="510" src="/next-js2.webp" alt="" data-astro-cid-bvzihdzo> </div> <div class="prose-wrapper" data-astro-cid-bvzihdzo> <div class="prose" data-astro-cid-bvzihdzo> <div class="author" data-astro-cid-bvzihdzo> <img width="70" height="70" src="/jswank.jpg" alt="author" class="author-image" data-astro-cid-bvzihdzo> <span data-astro-cid-bvzihdzo>Jeremiah Swank</span> <span data-astro-cid-bvzihdzo><time datetime="2024-09-30T05:00:00.000Z"> Sep 30, 2024 </time></span> </div> <div class="title" data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>Next JS: Authentication</h1> </div>  <p>For this project we will be using an authentication library called <a href="https://authjs.dev/">Authjs</a>. This library integrates with nextjs to handle authentication for our application.</p>
<h3 id="setup-auth-handler">Setup Auth Handler</h3>
<p>Create a file called <code>auth.ts</code> and add the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> NextAuth </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "next-auth"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> Credentials </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "next-auth/providers/credentials"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> const</span><span style="color:#E1E4E8"> { </span><span style="color:#1ED2AF">handlers</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">signIn</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">signOut</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">auth</span><span style="color:#E1E4E8"> } </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> NextAuth</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  theme: {</span></span>
<span class="line"><span style="color:#E1E4E8">    brandColor: </span><span style="color:#F7F0DC">"#1ED2AF"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    logo: </span><span style="color:#F7F0DC">"/logo.png"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    buttonText: </span><span style="color:#F7F0DC">"#ffffff"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  providers: [</span></span>
<span class="line"><span style="color:#1ED2AF">    Credentials</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">      credentials: {</span></span>
<span class="line"><span style="color:#E1E4E8">        email: {</span></span>
<span class="line"><span style="color:#E1E4E8">          label: </span><span style="color:#F7F0DC">"Email"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">        password: {</span></span>
<span class="line"><span style="color:#E1E4E8">          label: </span><span style="color:#F7F0DC">"Password"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">          type: </span><span style="color:#F7F0DC">"password"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        },</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">    }),</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"><span style="color:#E1E4E8">  callbacks: {},</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<p>This sets up Authjs with a credentials provider so users can login with an email and password. We’ve also added some branding to customize what the login page will look like.</p>
<p>Next we need to add a custom authoize method. This will be called when a user tries to login. Add the following authorize method to your Credentials provider in <code>auth.ts</code>:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> bcrypt </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "bcryptjs"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">...</span></span>
<span class="line"><span style="color:#1ED2AF"> Credentials</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">    credentials: {</span></span>
<span class="line"><span style="color:#E1E4E8">      email: {</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#F7F0DC">"Email"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">      password: {</span></span>
<span class="line"><span style="color:#E1E4E8">        label: </span><span style="color:#F7F0DC">"Password"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        type: </span><span style="color:#F7F0DC">"password"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      },</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#6A737D">    //@ts-ignore</span></span>
<span class="line"><span style="color:#1ED2AF">    authorize</span><span style="color:#E1E4E8">: </span><span style="color:#D00414">async</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">credentials</span><span style="color:#D00414">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">email</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8">; </span><span style="color:#FFAB70">password</span><span style="color:#D00414">:</span><span style="color:#1ED2AF"> string</span><span style="color:#E1E4E8"> }) </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#D00414">      const</span><span style="color:#E1E4E8"> { </span><span style="color:#1ED2AF">email</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">password</span><span style="color:#E1E4E8"> } </span><span style="color:#D00414">=</span><span style="color:#E1E4E8"> credentials;</span></span>
<span class="line"><span style="color:#D00414">      const</span><span style="color:#1ED2AF"> user</span><span style="color:#D00414"> =</span><span style="color:#D00414"> await</span><span style="color:#1ED2AF"> fetchUser</span><span style="color:#E1E4E8">(email);</span></span>
<span class="line"><span style="color:#D00414">      if</span><span style="color:#E1E4E8"> (</span><span style="color:#D00414">!</span><span style="color:#E1E4E8">user) </span><span style="color:#D00414">return</span><span style="color:#1ED2AF"> null</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">//@ts-ignore</span></span>
<span class="line"><span style="color:#D00414">      const</span><span style="color:#1ED2AF"> passwordsMatch</span><span style="color:#D00414"> =</span><span style="color:#D00414"> await</span><span style="color:#E1E4E8"> bcrypt.</span><span style="color:#1ED2AF">compare</span><span style="color:#E1E4E8">(password, user.password);</span></span>
<span class="line"><span style="color:#D00414">      if</span><span style="color:#E1E4E8"> (passwordsMatch) </span><span style="color:#D00414">return</span><span style="color:#E1E4E8"> user;</span></span>
<span class="line"><span style="color:#D00414">      return</span><span style="color:#1ED2AF"> null</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  }),</span></span>
<span class="line"></span></code></pre>
<p>This function takes the email and password from the login page, looks up the user in our database and then checks the password to see if it is correct. If correct it returns the new logged in user. Otherwise it returns null.</p>
<p>You will also need to add a authorize callback. This will reject uses who are not logged in:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> const</span><span style="color:#E1E4E8"> { </span><span style="color:#1ED2AF">handlers</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">signIn</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">signOut</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">auth</span><span style="color:#E1E4E8"> } </span><span style="color:#D00414">=</span><span style="color:#1ED2AF"> NextAuth</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  theme: {</span></span>
<span class="line"><span style="color:#E1E4E8">    brandColor: </span><span style="color:#F7F0DC">"#1ED2AF"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    logo: </span><span style="color:#F7F0DC">"/logo.png"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    buttonText: </span><span style="color:#F7F0DC">"#ffffff"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  providers: [</span></span>
<span class="line"><span style="color:#1ED2AF">    Credentials</span><span style="color:#E1E4E8">({ </span><span style="color:#D00414">...</span><span style="color:#E1E4E8"> }),</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"><span style="color:#E1E4E8">  callbacks: {</span></span>
<span class="line"><span style="color:#1ED2AF">    authorized</span><span style="color:#E1E4E8">: </span><span style="color:#D00414">async</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">auth</span><span style="color:#E1E4E8"> }) </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">      // Logged in users are authenticated, otherwise redirect to login page</span></span>
<span class="line"><span style="color:#D00414">      return</span><span style="color:#D00414"> !!</span><span style="color:#E1E4E8">auth;</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"></span></code></pre>
<p>In nextjs we need to tell the framework when to check authentication. To do this we add a <code>middleware.ts</code> file with the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">export</span><span style="color:#E1E4E8"> { auth </span><span style="color:#D00414">as</span><span style="color:#E1E4E8"> middleware } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/auth"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> const</span><span style="color:#1ED2AF"> config</span><span style="color:#D00414"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  matcher: [</span></span>
<span class="line"><span style="color:#F7F0DC">    "/((?!api|_next/static|_next/image|favicon.ico|logo.png|about|$).*)"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span></code></pre>
<p>Here we export our auth provider we just created as aour middleware. We also define a regex that tells nextjs when to apply the middleware. Here we exclude and urls that shoul dbe publicly available.</p>
<p>You will also need to add the authjs api routes to your application. Create a file called: <code>app/api/auth/[...nextauth]/route.ts</code> with the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { handlers } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/auth"</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">// Referring to the auth.ts we just created</span></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> const</span><span style="color:#E1E4E8"> { </span><span style="color:#1ED2AF">GET</span><span style="color:#E1E4E8">, </span><span style="color:#1ED2AF">POST</span><span style="color:#E1E4E8"> } </span><span style="color:#D00414">=</span><span style="color:#E1E4E8"> handlers;</span></span>
<span class="line"></span></code></pre>
<h3 id="create-auth-secret">Create Auth Secret</h3>
<p>The last step is to add a secret value as a environment variable. Run in your terminal:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#1ED2AF">npx</span><span style="color:#F7F0DC"> auth</span><span style="color:#F7F0DC"> secret</span></span>
<span class="line"></span></code></pre>
<p>This should generate a AUTH_SECRET value and add it to your <code>.env.local</code> file.</p>
<h3 id="loginlogout-actions">Login/Logout Actions</h3>
<p>We want the user to be able to login by clicking the login button and to logout by clicking the Sign Out button in the app sidebar.</p>
<p>In <code>app/page.tsx</code> there is already a form and button for logging in. We just need to add the signIn action from our auth library:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { signIn } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/auth"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#1ED2AF">form</span></span>
<span class="line"><span style="color:#1ED2AF">  action</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{</span><span style="color:#D00414">async</span><span style="color:#E1E4E8"> () </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F7F0DC">    "use server"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">    await</span><span style="color:#1ED2AF"> signIn</span><span style="color:#E1E4E8">(</span><span style="color:#F7F0DC">"default"</span><span style="color:#E1E4E8">, { redirectTo: </span><span style="color:#F7F0DC">"/ui"</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">  }}</span></span>
<span class="line"><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"inline-flex h-10 items-center justify-center rounded-md bg-primary px-8 text-sm font-medium text-primary-foreground shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">>Sign In&#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#1ED2AF">form</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<p>Now when clicking the login button from the home page the user should be redirected to the login page.</p>
<p>We need to do that same thing for the sign out button in the side bar. In the <code>components/SignOutButton.tsx</code> file add the following code:</p>
<pre class="astro-code github-dark" style="background-color:#00003c;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="tsx"><code><span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { PowerIcon } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@heroicons/react/24/outline"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">import</span><span style="color:#E1E4E8"> { signOut } </span><span style="color:#D00414">from</span><span style="color:#F7F0DC"> "@/auth"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D00414">export</span><span style="color:#D00414"> default</span><span style="color:#D00414"> function</span><span style="color:#1ED2AF"> SignOutButton</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#D00414">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#1ED2AF">form</span></span>
<span class="line"><span style="color:#1ED2AF">      action</span><span style="color:#D00414">=</span><span style="color:#E1E4E8">{</span><span style="color:#D00414">async</span><span style="color:#E1E4E8"> () </span><span style="color:#D00414">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F7F0DC">        "use server"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#D00414">        await</span><span style="color:#1ED2AF"> signOut</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">      }}</span></span>
<span class="line"><span style="color:#E1E4E8">    ></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#1ED2AF">button</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"flex h-[48px] w-full grow items-center justify-center gap-2 rounded-md bg-gray-50 p-3 text-sm font-medium hover:bg-primary-foreground hover:text-secondary md:flex-none md:justify-start md:p-2 md:px-3"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#1ED2AF">PowerIcon</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"w-6"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#1ED2AF">div</span><span style="color:#1ED2AF"> className</span><span style="color:#D00414">=</span><span style="color:#F7F0DC">"hidden md:block"</span><span style="color:#E1E4E8">>Sign Out&#x3C;/</span><span style="color:#1ED2AF">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#1ED2AF">button</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#1ED2AF">form</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<p>This will use the signOut action from our auth library to sign the user out whenever the sign out button is clicked.</p>  </div> </div> </article> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Jeremiah Swank. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/atlas-jswank" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swank's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="https://www.linkedin.com/in/jeremiah-swank-0a3559264/" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Jeremiah Swanks's LinkedIn</span> <svg style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;" version="1.1" viewBox="0 0 512 512" width="32" height="32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" data-astro-cid-sz7xmlte><path fill="currentColor" d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </main> </body></html>